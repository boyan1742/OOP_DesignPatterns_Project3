using System.Text;

using OOP_DesignPatterns_Project3.Algorithms;

namespace Tests.Algorithms;

public class MD5Tests
{
    private const string LoremIpsum9000Bytes =
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer purus ante, dignissim ac purus nec, pulvinar rhoncus tellus. Aliquam erat volutpat. Etiam sodales nec urna in venenatis. Suspendisse et tempor lectus. Ut vitae nisl leo. Vivamus non pharetra lectus. Proin consequat turpis pretium tortor sagittis, sed cursus lorem sollicitudin. Nullam varius libero mattis turpis ultricies elementum. Donec at rutrum massa. Duis sed leo fringilla, suscipit velit a, sodales ipsum.\n\nUt massa ante, dignissim eu placerat id, sollicitudin vel tellus. Ut viverra sed augue ut facilisis. Sed eget massa leo. Sed aliquet commodo lacus, quis congue odio sollicitudin a. In aliquam vel ipsum et volutpat. Morbi eu sapien scelerisque felis finibus blandit. Nulla aliquet fermentum leo in fermentum. Suspendisse malesuada, nunc a viverra pretium, tellus nibh tempor est, quis volutpat leo ipsum et mi. Nullam pharetra vulputate sapien, at pellentesque purus vulputate nec.\n\nPhasellus sit amet lacus sapien. Proin eu volutpat diam. Curabitur fringilla libero in sollicitudin pharetra. Curabitur ut blandit nisl, in venenatis lacus. Maecenas varius sed nibh non euismod. Aliquam erat volutpat. Donec quis vestibulum dolor, eget efficitur nisl. Etiam vitae lorem est. Quisque eget tellus libero.\n\nMauris pharetra velit eget facilisis consequat. In sit amet justo tellus. Proin sed tincidunt lorem. Etiam facilisis lacinia felis, ac malesuada justo pellentesque at. Cras fermentum purus sed tellus vulputate, id pharetra nibh rutrum. Pellentesque pellentesque tincidunt dui id rutrum. Fusce at rhoncus nibh, nec molestie ex. Nam ullamcorper ultricies malesuada. In hac habitasse platea dictumst. Duis risus lorem, congue at magna semper, vehicula egestas felis. Etiam eget neque pulvinar, iaculis elit eu, blandit nunc.\n\nSuspendisse a massa sit amet ex ornare eleifend sit amet sit amet risus. Phasellus rhoncus est ac diam pharetra, feugiat ullamcorper justo vulputate. Phasellus euismod tortor sed lobortis aliquam. In risus neque, mattis et augue vel, vulputate sagittis lectus. Nunc iaculis congue placerat. Sed ut nisl semper, laoreet turpis sed, vestibulum enim. Nullam ullamcorper vestibulum libero mollis posuere.\n\nNam et massa varius, faucibus orci ut, porta libero. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Integer maximus ex quis sagittis dictum. Integer nec imperdiet erat. Suspendisse id lectus eget magna vestibulum pretium ut non lacus. Nam bibendum ligula vel hendrerit auctor. Curabitur vel quam turpis. Cras laoreet nisl id nulla dignissim fermentum. Curabitur gravida nunc nec sapien tincidunt, quis malesuada mi blandit. Aliquam feugiat venenatis euismod. Maecenas gravida nulla a vulputate vehicula. Donec sollicitudin magna in lectus dictum, et interdum massa scelerisque.\n\nSed ut odio sit amet augue elementum pellentesque et in turpis. Nullam ac diam ut velit faucibus blandit. Suspendisse a massa semper risus vestibulum dignissim. Vestibulum feugiat aliquam rutrum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Praesent semper libero ac est semper, non interdum magna rhoncus. Donec tempor tempor viverra. Duis tincidunt risus gravida metus imperdiet sagittis.\n\nNulla facilisi. Praesent leo lacus, ullamcorper id pellentesque vitae, dictum vel magna. Nullam mattis lobortis lorem quis volutpat. Vestibulum non sodales leo, ac vulputate nisl. In hac habitasse platea dictumst. Pellentesque mollis, mi eu dapibus sodales, nunc mi viverra urna, vitae lacinia ipsum urna quis purus. Morbi lacinia, elit ac dignissim auctor, odio orci venenatis nulla, quis luctus lacus nisi ac purus. Aliquam erat volutpat. Sed in ligula fermentum, venenatis tortor eu, placerat nunc. Ut a enim massa.\n\nMaecenas malesuada blandit interdum. Praesent elementum ac purus eu sollicitudin. Nunc dapibus aliquet nisi non aliquam. Phasellus ultricies id augue eget pharetra. Aliquam erat volutpat. Ut ultricies augue non orci finibus, imperdiet porttitor odio pretium. Maecenas ac tortor turpis. Integer lobortis hendrerit enim non porttitor. Ut tempus accumsan arcu, non pharetra massa mattis at. Quisque est nibh, cursus at efficitur id, maximus faucibus sem. In nec massa nisi.\n\nSuspendisse ultrices eleifend ante. Curabitur luctus at lacus quis malesuada. Phasellus ultricies libero vitae nunc lacinia pharetra. Maecenas vestibulum sed erat et lobortis. Etiam eget efficitur erat, a pharetra tellus. Sed lobortis erat a mauris feugiat, a sollicitudin erat pellentesque. Donec sodales metus tortor, eget commodo enim efficitur id. Suspendisse posuere orci a sagittis tristique. Duis aliquam maximus massa eu tincidunt. Duis a volutpat mi. In aliquam sed leo eu sagittis. Ut a interdum turpis. Sed interdum elementum ligula, vel semper lorem venenatis a. Pellentesque sed est vitae orci ullamcorper porttitor. Fusce ornare justo in lacus consequat suscipit. Aenean non lectus posuere, mollis libero sed, dapibus magna.\n\nNunc ac dapibus augue, vitae aliquet dolor. Quisque non dui gravida, eleifend nulla sed, pretium risus. Cras pellentesque ante non aliquet commodo. Aenean at viverra leo. Etiam tincidunt tortor mauris, et aliquet neque feugiat sit amet. Integer pellentesque elit nec justo elementum lacinia. Mauris efficitur sollicitudin leo. Phasellus et ipsum pharetra, gravida lorem quis, suscipit dolor. Curabitur at facilisis sem. Duis sit amet eros ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Quisque pharetra lobortis lorem pellentesque pulvinar.\n\nPraesent vel ultricies odio. Proin at vulputate sem. Vivamus sed vestibulum mi. Nam tincidunt aliquet blandit. Pellentesque vitae pulvinar justo. Duis eu neque id dolor luctus porta eget a orci. Aenean mollis mauris a iaculis sollicitudin. Vestibulum hendrerit leo eget velit scelerisque, vitae ornare nunc egestas. Vivamus maximus varius massa, et tincidunt urna sagittis eu. Nunc et dui nec mauris porttitor feugiat non eu ante. Donec ac sapien neque. Ut vestibulum tortor at mollis scelerisque. Vivamus a aliquet erat.\n\nAenean vitae ullamcorper lacus. Nam rhoncus, sapien interdum egestas molestie, ante risus cursus mi, commodo placerat ex libero at turpis. Praesent fringilla volutpat nisl, pellentesque maximus nulla consectetur sed. Nam posuere eros eget nisl bibendum, vitae pulvinar sapien molestie. Maecenas ultrices rutrum leo id elementum. Vivamus sapien nisi, consequat quis orci eget, lobortis placerat ipsum. Integer congue lorem id orci tristique, vel blandit libero tristique. Ut cursus ex risus, vitae ultrices magna suscipit ut.\n\nNullam feugiat felis mattis hendrerit pellentesque. Vestibulum nec cursus nibh, vel ultricies felis. Cras lacinia purus et nibh tempus, at malesuada nulla rutrum. Aliquam erat volutpat. Pellentesque fringilla nisi sit amet eros aliquet molestie. Ut quis dolor sem. Duis molestie ornare libero. Aliquam erat volutpat. Pellentesque tincidunt aliquam justo vel tempor. Cras gravida turpis condimentum vehicula imperdiet. Phasellus ipsum risus, imperdiet at erat sed, vestibulum ullamcorper nisl. Curabitur at aliquet nisl. Maecenas felis lorem, aliquet ullamcorper eros eget, tincidunt consectetur ante.\n\nSed mollis enim nisi, at aliquet ante egestas a. Sed auctor massa vitae turpis convallis, ac aliquet nunc tincidunt. Aenean et lacinia nunc. Nulla et sem gravida, suscipit dolor quis, interdum est. Proin pretium congue efficitur. Cras feugiat euismod sagittis. Curabitur sit amet metus iaculis odio dictum mattis id et sapien. Integer justo dolor, lobortis viverra vulputate id, fermentum et diam. Phasellus interdum risus dui, vel pharetra ex convallis sit amet. Praesent tristique, mi a sollicitudin lobortis, tellus lectus blandit justo, vel cursus ex lorem a felis. Integer varius ligula nisi, sed facilisis metus volutpat in. Donec bibendum volutpat urna vestibulum elementum. Integer in dolor eget nunc egestas tempor in ut mauris. Aliquam ante quam, ultrices eu scelerisque vel, facilisis varius felis. Nullam ultricies gravida dolor, eget tempus neque laoreet non. Proin quis ante est.\n\nSed et massa quis lorem luctus pretium at in mauris. Vivamus rutrum metus venenatis porttitor lacinia. Pellentesque ut tortor finibus urna accumsan euismod vitae vitae libero. Aliquam a dui pellentesque, auctor sem ac, commodo ante. Cras vel venenatis diam, vitae vulputate erat. Phasellus sit amet luctus sapien. In euismod, leo vulputate feugiat scelerisque, nulla dui imperdiet lorem, sit amet ultrices neque lectus non lacus. Morbi aliquam ullamcorper felis. Nullam vel nisl dapibus nisi malesuada vehicula. Nullam placerat lectus at libero scelerisque luctus. Integer mollis, arcu venenatis dictum convallis, ex ligula tincidunt nisi, vitae consequat arcu tortor eget ligula. Phasellus non diam hendrerit metus pellentesque bibendum. Donec eget sem ut massa porta hendrerit. Praesent quis dapibus ipsum, vitae fringilla lacus. Quisque porta vel velit vel luctus. Integer venenatis eleifend.";
    
    [Fact]
    public void TestPerformAction()
    {
        MD5Algorithm alg = new MD5Algorithm(nameof(MD5Tests));

        Stream stream = new MemoryStream("Test string"u8.ToArray());

        string ret = alg.PerformAlgorithm(stream);

        Assert.Equal("0fd3dbec9730101bff92acc820befc34", ret);
    }
    
    [Fact]
    public void TestPerformActionChunks()
    {
        MD5Algorithm alg = new MD5Algorithm(nameof(MD5Tests));

        Stream stream = new MemoryStream(Encoding.ASCII.GetBytes(LoremIpsum9000Bytes));

        string ret = alg.PerformAlgorithm(stream);

        Assert.Equal("8f8d2d33507228cfc8eb6330c75cbc87", ret);
    }
}